<template>
  <style>
    :host {
      display: inline-block;
      background-color: #AB2E24;
      border-radius: 10px;
      position: relative;
      padding: 5px;
    }
  </style>

  <div id="piano"></div>
</template>

<script>
  let jzztesttemp = document.currentScript.ownerDocument.querySelector('template');

  class JzzTestGui extends HTMLElement {
    constructor(plug) {
      super();
      // The audio processor is a field of this GUI
      this._plug = plug;
      // The link is bidirectionnal to be catched by the processor if needed once the module is loaded (for features like presets)
      this._plug.gui = this;
      // bind shadow to the class and clone the template into it
      this._root = this.attachShadow({ mode: 'open' });
      this._root.appendChild(jzztesttemp.content.cloneNode(true));
      var piano = JZZ.input.Kbd({ at: this._root.querySelector('#piano') });
      var synth = JZZ.synth.OSC();
      piano.connect(synth);
    }
  }

  try {
    // Define the custom element to the browser
    customElements.define('wasabi-lowfilter', JzzTestGui);
    console.log("Element defined");
  } catch (error) {
    console.log(error);
    console.log("Element already defined");
  }

  createJzzTest = (plug) => {
    let elem = new JzzTestGui(plug);
    return elem;
  }

</script>
